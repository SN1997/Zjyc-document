# Spring Data JPA 自动更新数据

JPA中的实体对象拥有四种状态：

- 瞬时状态（transient）

- 托管状态（persistent）

- 游离状态（detached）

- 删除状态 （deleted）

  

  



![](https://github.com/SN1997/Zjyc-document/blob/master/picture/1557053311860.png)

# **瞬时状态：**

实际上就是new了一个普通的JavaBean对象。

 

**托管状态：**

**1.**当1.瞬时对象调用了管理器的persist()后，即可将一般的JavaBean做为了持久Bean，该Bean的任何属性改动都会牵涉到数据库记录的改动。**2.**一旦该记录flush到数据库之后，并且事务提交了，那么此对象不在持久化上下文中，即：变为了游离（没人管的孩子）状态了。在游离状态的时候调用更新、刷新方法后，游离状态对象就变为了在持久化上下文的托管状态了。**3.**通过管理器的find方法，将实体从数据库查询出来后，该实体也就变为了托管形态。

 

**持久化状态：**

当处在托管状态的实体Bean被管理器flush了，那么就在极短暂的时间进入了持久化状态，事务提交之后，立刻变为了游离状态。您可以把持久化状态当做实实在在的数据库记录。

 

**游离状态：**

游离状态就是提交到数据库后，事务commit后实体的状态，因为事务已经提交了，此时实体的属性任你如何改变，也不会同步到数据库，因为游离是没人管的孩子，不在持久化上下文中。

 

**销毁对象：**

一般要删除一个持久化对象的时候都是先find出来，之后调用remove方法删之，此时这个对象就是销毁对象，实际上就是瞬时对象的另一种形态罢了。